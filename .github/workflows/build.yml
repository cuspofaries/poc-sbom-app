# =============================================================================
# Supply Chain Pipeline
# =============================================================================
# Zero build, signing, or SBOM logic in this repo.
# Everything is delegated to a single reusable workflow from sdlc.
# Shift-left: image is scanned BEFORE being pushed to the registry.
# =============================================================================

name: Supply Chain Pipeline

on:
  push:
    branches: [main]
  pull_request:
    branches: [main]
  workflow_dispatch:

permissions:
  contents: read
  packages: write
  id-token: write

jobs:

  supply-chain:
    uses: cuspofaries/sdlc/.github/workflows/supply-chain-reusable.yml@main
    with:
      context: ./app
      image-name: poc-sbom-build
      dtrack-hostname: dep-api.anthonymacle.com
    secrets:
      REGISTRY_TOKEN: ${{ secrets.GITHUB_TOKEN }}
      DTRACK_API_KEY: ${{ secrets.DTRACK_API_KEY }}
